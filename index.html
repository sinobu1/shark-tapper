<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
<style>
      html, body {
        margin: 0;
        padding: 0;
        font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
        background: #f2f2f7;
        color: #1c1c1e;
        width: 100%;
        height: 100%;
        overflow-x: hidden;
        touch-action: manipulation;
      }
      .game-container, #gameContainer {
        max-width: 420px;
        margin: 0 auto;
        padding: 100px 20px 60px;
        background: white;
        border-radius: 28px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        position: relative;
        box-sizing: border-box;
      }
      .menu-buttons, .bottom-menu, .shop-button {
        font-weight: 600;
        font-size: 16px;
        border-radius: 16px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      }
    </style>
<title>Shark Tapper</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body><div class="wrapper">
<div class="loading-screen" id="loading">
<img alt="Loading..." src="w1.png"/>
<span>Приключение 2025</span>
</div>
<div class="game-container" id="gameContainer" style="display:none">
<div class="balance" id="tokenCount">0 токенов</div>
<img alt="Shark" class="tap-image" id="tapImage" onclick="handleTap()" src="shark.png?v=1"/>
<div class="menu-buttons">
<button class="shop-button" onclick="openShop()">Магазин</button>
<button class="shop-button" onclick="openBoosters()">Бустеры</button>
</div>
<button class="shop-button" id="endButton" onclick="Telegram.WebApp.close()" style="display: none;">Завершить</button>
</div>
<div class="shop-modal" id="shop-modal">
<div class="shop-item">
<img src="shark.png?v=1"/>
<button onclick="buySkin('default', 0)">Выбрать</button>
</div>
<div class="shop-item">
<img src="shark_skin2.png?v=1"/>
<button onclick="buySkin('skin2', 1000)">Выбрать</button>
</div>
<div class="shop-item">
<img src="shark_skin1.png?v=1"/>
<button onclick="buySkin('skin3', 500)">Выбрать</button>
</div>
<button onclick="closeShop()">Скрыть</button>
</div>
<div class="booster-modal" id="booster-modal">
<div class="booster-item">
<div class="booster-info">Авто-Тап +1 (50 токенов)</div>
<button onclick="buyBooster(50, 1)">Купить</button>
</div>
<div class="booster-item">
<div class="booster-info">Авто-Тап +2 (100 токенов)</div>
<button onclick="buyBooster(100, 2)">Купить</button>
</div>
<div class="booster-item">
<div class="booster-info">Авто-Тап +3 (1000 токенов)</div>
<button onclick="buyBooster(1000, 3)">Купить</button>
</div>
<button onclick="closeBoosters()">Скрыть</button>
</div>

</div><script>
document.addEventListener('DOMContentLoaded', function () {
  const loading = document.getElementById('loading');
  const game = document.getElementById('gameContainer');
  const endBtn = document.getElementById('endButton');
  
  setTimeout(() => {
    if (loading) loading.style.display = 'none';
    if (game) game.style.display = 'flex';
    if (endBtn) endBtn.style.display = 'inline-block';
  }, 2000);

  if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    const userId = Telegram.WebApp.initDataUnsafe?.user?.id?.toString();
    if (userId) {
      window.userId = userId;
      if (typeof loadProgress === 'function') loadProgress();
      if (typeof startAutoTap === 'function') startAutoTap();
    } else {
      alert("Не удалось получить userId из Telegram Web App.");
    }
  }
});
</script></body>
</html>
